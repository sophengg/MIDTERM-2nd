<html>
  <head>
    <title>Database Checker</title>

    <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    instegrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
    crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </head>

  </body>
</html>

<div class="col-md-6">
  <form>
    <div class="form-group">
      <label>Student Name</label>
      <input type="text" class="form-control" id="student-name" placeholder="student-name">
    </div>
    <div class="form-group">
      <label>Student Number</label>
      <input type="text" class="form-control" id="student-number" placeholder="student-number">
    </div>
    <div class="form-group">
      <label>Book Title</label>
      <input type="text" class="form-control" id="book-title" placeholder="book-title">
    </div>
    <div class="form-group">
      <label>Book Number</label>
      <input type="text" class="form-control" id="book-number" placeholder="book-number">
    </div>
    <button type="Submit" id="submit" class="btn btn-primary">Submit</button>
  </form> 
</div>

<div class="col-md-6">
<table class="table table-striped" id="dataTbl">
  <thead>
    <tr>
      <th scope="col">Student Name</th>
      <th scope="col">Student Number</th>
      <th scope="col">Book Title</th>
      <th scope="col">Book Number</th>
    </tr>
  </thead>

  <tbody>
    <tr>
  <td>Juan Dela Cruz</td>
  <td>1</td>
  <td>THE CREATIVE ACT: A WAY OF BEING</td>
  <td>201811</td>

  <td>Allysa Trenta</td>
  <td>2</td>
  <td>THE BETTER HALF</td>
  <td>208456</td>

  <td>Joshua Santos</td>
  <td>3</td>
  <td>LIGHTS OUT</td>
  <td>2018934</td>

  <td>Elijah Tejano</td>
  <td>4</td>
  <td>THE CREATIVE ACT: A WAY OF BEING</td>
  <td>201811</td>

  </tr>
</tbody>
</table>
</div>

</body>
</html>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>


<script type="module">

  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
  import { getDatabase, set, ref, push, child, onValue} from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyC_WBH7WV0iHV8LW_cZWMuWY1LSKtWJ8Vk",
    authDomain: "table-bc045.firebaseapp.com",
    databaseURL: "https://console.firebase.google.com/project/table-bc045/database/table-bc045-default-rtdb/data/~2F",
    projectId: "table-bc045",
    storageBucket: "table-bc045.appspot.com",
    messagingSenderId: "560703801805",
    appId: "1:560703801805:web:08fb098aa9c0fbfe141c84",
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);  
  
  // Initialize Realtime Database and get a reference to the service
  const database = getDatabase(app);
  

  (submit.addEventListemer)('click'),(e) => {
  

  }
  var StudentName = document.getElementById('student-name').value;
  var StudentNumber = document.getElementById('student-number').value;
  var BookTitle = document.getElementById('book-title').value;
  var BookNumber = document.getElementById('book-number').value;
  
  const userId = push (child(ref(database), 'users')).key;

  set(ref(database, 'users/' + userId), {
    StudentName: StudentName,
    StudentNumber: StudentNumber,
    BookTitle : BookTitle,
    BookNumber : BookNumber

  });
  alert('saved');

  getData.addEventListener('click',(e) => {

    $('#dataTbl td').remove();
    var rowNum = 0;
    const dbRef = ref (database, 'users');

    onValue(dbRef, (snapshot) => {
      snapshot.forEach((childSnapshot) => {
        const (childkey) = childSnapshot.key;
        const (childData) = childSnapshot.val();
        //...

        rowNum += 1;
        var row = "<tr><td>" + childData.StudentName + "</td><td>" = childData.StudentNumber + "</td><td>" + childData.
          BookTitle + "</td><tr>" + childData.BookNumber;

          $(row).appendTo('#dataTbl')


      });
    }, {
      onlyOnce: true
    });

  });

</script>
